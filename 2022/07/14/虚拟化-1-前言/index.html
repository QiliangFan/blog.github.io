<!DOCTYPE html><html lang=zh-CN data-default-color-scheme=auto><head><meta charset=UTF-8><link rel=apple-touch-icon sizes=76x76 href=/img/favicon.png><link rel=icon href=/img/favicon.png><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv=x-ua-compatible content="ie=edge"><meta http-equiv=Content-Security-Policy content="default-src 'none'; form-action 'none'; base-uri 'self'; img-src 'self' imagebed.torch-fan.site img1.imgtp.com s1.ax1x.com s1.328888.xyz; script-src 'self' lib.baomitu.com at.alicdn.com utteranc.es 'nonce-1' 'nonce-2' 'nonce-3' 'nonce-4' 'nonce-5' 'nonce-6' 'nonce-7' 'nonce-8' 'nonce-9' 'nonce-10' 'nonce-11' 'nonce-12' 'nonce-13' 'nonce-14'; style-src 'self' 'unsafe-inline' at.alicdn.com lib.baomitu.com; media-src 'self' blob:; worker-src 'self' blob:; object-src 'self'; font-src 'self' lib.baomitu.com at.alicdn.com data:; frame-src 'self' utteranc.es ; "><meta name=theme-color content=#2f4154><meta name=author content=Torch-Fan><meta name=keywords content=""><meta name=description content="1. 前言  《系统虚拟化：原理与实现》笔记： 具体来说，虚拟化技术的实现形式是在系统中加入一个虚拟化层，虚拟化层将下层的资源抽象成另一形式的资源，提供给上层使用。通过空间上的分割、时间上的分时以及模拟，虚拟化可以将一份资源抽象成多份。反过来，虚拟化也可以将多份资源抽象成一份。  虚拟化技术成熟的时机真正到来，发生在**硬件虚拟化技术**的诞生之后（如Intel VT技术和AMD SVM技术）"><title>虚拟化(1):前言 - Torch-Fan</title><link rel=stylesheet href=https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css><link rel=stylesheet href=https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css><link rel=stylesheet href=https://lib.baomitu.com/hint.css/2.7.0/hint.min.css><link rel=stylesheet href=https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css><link rel=stylesheet href=https://lib.baomitu.com/KaTeX/0.15.2/katex.min.css><link rel=stylesheet href=//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css><link rel=stylesheet href=/css/font.css><link rel=stylesheet href=/css/main.css><link id=highlight-css rel=stylesheet href=/css/highlight.css><link id=highlight-css-dark rel=stylesheet href=/css/highlight-dark.css><script id=fluid-configs nonce=4>var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var dntVal,CONFIG={hostname:"www.torch-fan.site",root:"/",version:"1.9.0",typing:{enable:!0,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:null,google:null,gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};CONFIG.web_analytics.follow_dnt&&(dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on")))</script><script src=/js/utils.js></script><script src=/js/color-schema.js></script><meta name=generator content="Hexo 5.4.2"><link rel=alternate href=/atom.xml title=Torch-Fan type=application/atom+xml></head><body><header><div class=header-inner style=height:70vh><nav id=navbar class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class=container><a class=navbar-brand href=/ ><strong>Torch-Fan</strong> </a><button id=navbar-toggler-btn class=navbar-toggler type=button data-toggle=collapse data-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation"><div class=animated-icon><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id=navbarSupportedContent><ul class="navbar-nav ml-auto text-center"><li class=nav-item id=search-btn><a class=nav-link target=_self href=javascript:; data-toggle=modal data-target=#modalSearch aria-label=Search>&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class=nav-item><a class=nav-link href=/ ><i class="iconfont icon-home-fill"></i> 首页</a></li><li class=nav-item><a class=nav-link href=/archives/ ><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class=nav-item><a class=nav-link href=/categories/ ><i class="iconfont icon-category-fill"></i> 分类</a></li><li class=nav-item><a class=nav-link href=/tags/ ><i class="iconfont icon-tags-fill"></i> 标签</a></li><li class=nav-item><a class=nav-link href=/about/ ><i class="iconfont icon-user-fill"></i> 关于</a></li><li class=nav-item id=color-toggle-btn><a class=nav-link target=_self href=javascript:; aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id=color-toggle-icon></i>&nbsp;</a></li></ul></div></div></nav><div id=banner class=banner parallax=true style="background:url(/img/default.png) no-repeat center center;background-size:cover"><div class=full-bg-img><div class="mask flex-center" style=background-color:rgba(0,0,0,.3)><div class="banner-text text-center fade-in-up"><div class=h2><span id=subtitle data-typed-text=虚拟化(1):前言></span></div><div class=mt-3><span class=post-meta><i class="iconfont icon-date-fill" aria-hidden=true></i> <time datetime="2022-07-14 06:16" pubdate>2022年7月14日 早上</time></span></div><div class=mt-1><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 4.1k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 35 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id=board-ctn><div id=board><article class="post-content mx-auto"><h1 style=display:none>虚拟化(1):前言</h1><div class=markdown-body><h1 id=1-前言><a class=markdownIt-Anchor href=#1-前言></a> 1. 前言</h1><blockquote><p>《系统虚拟化：原理与实现》笔记：</p><p><em>具体来说，虚拟化技术的实现形式是在系统中加入一个虚拟化层，虚拟化层将下层的资源抽象成另一形式的资源，提供给上层使用。通过空间上的分割、时间上的分时以及模拟，虚拟化可以将一份资源抽象成多份。反过来，虚拟化也可以将多份资源抽象成一份。</em></p></blockquote><p>虚拟化技术成熟的时机真正到来，发生在**<u>硬件虚拟化技术</u>**的诞生之后（如Intel VT技术和AMD SVM技术）</p><p><img src=https://imagebed.torch-fan.site/2022/blog20220714072606.png alt=计算机系统的各个抽象层></p><ul><li>硬件抽象层(Hardware Abstraction Layer, HAL) 是计算机中软件所能控制的硬件的抽象接口(如CPU寄存器、内存管理模块、I/O端口和内存映射的I/O地址<sup id=fnref:1 class=footnote-ref><a href=#fn:1 rel=footnote><span class="hint--top hint--rounded" aria-label="Memory mapped I/O and Isolated I/O - GeeksforGeeks
">[1]</span></a></sup>等）</li><li>API抽象层抽象的是一个进程所能控制的系统功能的集合, 包括创建进程、申请和归还内存、进程间同步与共享等</li></ul><h2 id=11-硬件抽象层上的虚拟化><a class=markdownIt-Anchor href=#11-硬件抽象层上的虚拟化></a> 1.1 硬件抽象层上的虚拟化</h2><p>​	硬件抽象层上的虚拟化是通过抽象<code>硬件抽象层</code>来实现虚拟机, 为客户机操作系统呈现和物理硬件相同或相近的硬件抽象层. 由于客户机操作系统所能看到的是硬件抽象层, 因此客户机操作系统的行为和在物理平台上没有什么区别.</p><p>​	硬件抽象层中,Host和Guest的ISA(Instruction Set Architectrue, 指令集架构)一般是一样的. Guest OS的大部分指令都可以在宿主机处理器上直接运行,只有那些需要虚拟化的指令才会由虚拟化软件进行处理, 从而大大<font color=red><strong>降低虚拟化开销</strong></font>.</p><p>​	Guest和Host的硬件抽象层的某些部分如中断控制器、设备等，可以是完全不同的，当客户机对硬件抽象层访问时，虚拟化软件需要对此进行截获并模拟。</p><h2 id=12-操作系统层上的虚拟化><a class=markdownIt-Anchor href=#12-操作系统层上的虚拟化></a> 1.2 操作系统层上的虚拟化</h2><p>​	操作系统层上的虚拟化是指操作系统的内核可以提供多个相互隔离的<font color=green><strong>用户态实例</strong></font>，这些用户态实例（通常而言被称为<font color=cyan><strong>容器</strong>/<strong>container</strong></font>）对于它的用户而言就像真的计算机，有自己独立的操作系统, 网络, 系统设置和库函数.</p><p>​	这种技术可以认为是UNIX系统<code>chroot</code><sup id=fnref:2 class=footnote-ref><a href=#fn:2 rel=footnote><span class="hint--top hint--rounded" aria-label="chroot command in Linux with examples - GeeksforGeeks
">[2]</span></a></sup>命令的延伸, 因为这是操作系统内核主动提供的虚拟化, 因此操作系统层上的虚拟化也非常高效, 它的虚拟化资源和性能开销非常小, 也不需要有硬件的特殊支持. 但是灵活性较小, <font color=pink>每个容器中的操作系统必须和宿主机是同一类操作系统</font>(注意是同一类, 至于什么能归为一类则要更细的划分了)</p><h2 id=13-库函数层上的虚拟化><a class=markdownIt-Anchor href=#13-库函数层上的虚拟化></a> 1.3 库函数层上的虚拟化</h2><p>​	操作系统通过应用级的库函数提供给应用程序一组服务, 例如文件操作服务\时间操作服务等。例如，wine是在Linux上模拟了Windows的库函数接口，使得WIndows程序能够在Linux上正常运行。</p><h2 id=14-编程语言层上的虚拟化><a class=markdownIt-Anchor href=#14-编程语言层上的虚拟化></a> 1.4 编程语言层上的虚拟化</h2><p>​	如JVM（Java Virtual Machine）和微软的CLR（Common Language Runtime）。这类虚拟机运行的是一个进程级的作业，所不同的是这些程序所针对的不是一个硬件上存在的体系结构，而是一个虚拟体系结构。</p><hr><h2 id=系统虚拟化><a class=markdownIt-Anchor href=#系统虚拟化></a> 系统虚拟化</h2><p>理论上来说，虚拟机和物理机可以是两个完全不同的ISA系统，但是不同的ISA使得虚拟机的每一条指令都需要在物理机上模拟执行，从而造成性能的极大下降。相同体系架构的系统虚拟化通常会有较好性能, 实现起来也更简单.</p><blockquote><p>1974年, Popek和Goldberg定义了虚拟机可以看作是物理机的一种高效隔离复制.</p><p>上面蕴含了虚拟机的三个典型特征: 同质、高效和资源受控。</p></blockquote><p><img src=http://imagebed.torch-fan.site/2022/blog/20220714094813.png alt=系统虚拟化></p><p>上图中虚拟化层也被称为VMM(Virtual Machine Monitor), 通过虚拟化层的模拟, 虚拟机中的操作系统认为自己仍然是独占一个系统在运行. 只要两台机器提供相同的虚拟硬件抽象层，虚拟机可以在两者之间进行无缝地迁移。</p><h1 id=2-x86概要><a class=markdownIt-Anchor href=#2-x86概要></a> 2. x86概要</h1><h2 id=21-x86内存架构><a class=markdownIt-Anchor href=#21-x86内存架构></a> 2.1 x86内存架构</h2><h3 id=211-地址空间><a class=markdownIt-Anchor href=#211-地址空间></a> 2.1.1 地址空间：</h3><ol><li>物理地址空间</li></ol><p>​	硬件平台可以简单的划分为三部分：CPU、内存和其他硬件设备。在CPU眼中，内存和其他硬件设备都属于可以使用的资源，这些资源组合在一起，分布在CPU的物理地址空间中。物理地址空间的大小，由CPU实现的物理地址位数决定，但物理地址的位数和CPU处理数据的能力（即CPU位数没有必然的联系）， 如16位的8086CPU具有20位的地址空间。</p><p>​	在这里，可以用<font color=cyan><strong>内存映射I/O</strong></font>来举例，如一个CPU的物理地址空间为4GB，有512MB的内存，其他硬件设备寄存器被映射到512MB的I/O地址内，则该平台的物理地址空间中有1GB的元素是有效的，其余部分不存在。</p><ol start=2><li>线性地址空间</li></ol><p>​	一个平台只能有一个物理地址空间,但是每个程序都认为自己独享了整个平台的硬件资源, 为了让多个程序能够相互隔离并安全地使用物理地址空间的资源, 于是引入了线性地址空间的概念.</p><p>​	线性地址空间的大小同样取决于CPU实现的线性地址位数, 例如32位线性地址的CPU具有4GB大小的线性地址空间. 注意, 线性地址空间的大小和物理地址空间大小没有必然联系, 如Intel的PAE平台有4GB的线性地址空间, 64GB的物理地址空间.</p><p>​	线性地址空间会被映射到物理地址空间的某一部分或者整个物理地址空间, CPU负责将线性地址转换成物理地址, 使程序能够正确访问到该线性地址空间所映射.</p><p><img src=https://imagebed.torch-fan.site/2022/blog/20220714103654.png alt=线性地址空间></p><h3 id=212-地址><a class=markdownIt-Anchor href=#212-地址></a> 2.1.2 地址:</h3><ol><li>逻辑地址</li></ol><p>​	由于x86特殊的<code>段机制</code>, 还有一种逻辑地址, 即程序直接使用的地址, 由段选择符和偏移量(32位平台中是32位)构成. 在C语言中, 指针实际上存储的是逻辑地址的<code>偏移部分</code>, 而该偏移对应的<code>段选择符</code>位于段寄存器中.</p><ol start=2><li>线性地址(虚拟地址)</li></ol><p>​	线性地址是逻辑地址转换后的结果, 用于索引线性地址空间. 当CPU使用<code>分页机制</code>时, 线性地址必须转换成物理地址才能访问平台内存或硬件设备才能访问内存和硬件设备; 当分页机制未启用时, 线性地址相当于物理地址. 有关分段和分页可见<sup id=fnref:3 class=footnote-ref><a href=#fn:3 rel=footnote><span class="hint--top hint--rounded" aria-label="Difference Between Paging and Segmentation - GeeksforGeeks
">[3]</span></a></sup></p><ol start=3><li>物理地址</li></ol><p>​	这是CPU提交到总线用于访问平台内存和硬件设备的最终地址, 它和上面两个地址有如下关系:</p><ul><li>分段机制启用, 分页未启用时: 逻辑地址 <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=application/x-tex>\rightarrow</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.36687em;vertical-align:0></span><span class=mrel>→</span></span></span></span> 线性地址 = 物理地址</li><li>分段机制和分页机制都启动: 逻辑地址 <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=application/x-tex>\rightarrow</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.36687em;vertical-align:0></span><span class=mrel>→</span></span></span></span> 线性地址 <span class=katex><span class=katex-mathml><math><semantics><mrow><mo>→</mo></mrow><annotation encoding=application/x-tex>\rightarrow</annotation></semantics></math></span><span class=katex-html aria-hidden=true><span class=base><span class=strut style=height:.36687em;vertical-align:0></span><span class=mrel>→</span></span></span></span> 物理地址</li></ul><blockquote><p>这里可以停下来思考一下, 逻辑地址是否是应用程序中(高级语言编程)使用的相对地址, 而线性地址对应整个进程使用的相对地址, 而物理地址就是最终内存中实际地址?</p></blockquote><blockquote><p>知识补充: <font><strong>总线地址</strong></font></p><p>在x86下, 设备寄存器的物理地址和寄存器在设备上的地址是不同的, 存在一个映射关系(由电子线路负责转换), 对CPU是透明的, 而CPU用于访问设备的物理地址是设备寄存器展现给总线的地址, 所以在x86下有时也称物理地址为总线地址</p></blockquote><h3 id=213-x86内存管理机制><a class=markdownIt-Anchor href=#213-x86内存管理机制></a> 2.1.3 x86内存管理机制</h3><h4 id=1-分段机制><a class=markdownIt-Anchor href=#1-分段机制></a> 1. 分段机制</h4><blockquote><p>分段机制: 将内存划分成以起始地址(Base)和长度(Limit)描述的块, 这些内存块就被称为段.</p></blockquote><p>分段机制由4个基础部分组成:</p><ul><li>逻辑地址</li><li>段选择寄存器</li><li>段描述符</li><li>段描述符表</li></ul><p><img src=https://imagebed.torch-fan.site/2022/blog/segment.png alt=分段机制></p><p>​	段选择符(segment selector): 是逻辑地址的一个组成部分, 共16位, 用来索引<code>段描述表</code>以获得该段对应的<code>段描述符</code>. 段选择符中有标识段表的字段, 是用本地段表还是全局段表, 以及其他控制字段. 为了CPU能够快速获得段选择符, x86架构提供了6个段寄存器(segment register)用于存放当前程序的各个段的段选择符.</p><blockquote><ul><li>CS(code-segment, 代码段): 存放代码段的段选择符</li><li>DS(data-segment, 数据段): 存放数据段的段选择符</li><li>SS(stack-segment, 栈段): 存放栈的段选择符</li><li>ES、FS、GS：供程序自由使用，可以存放额外3个数据段的段选择符。</li></ul></blockquote><p>​	段描述符(segment descriptor): 段描述符记录了各个段的<code>基地址</code>, <code>长度</code>和<code>各种属性</code>.</p><p>​	段描述表(简称段表), x86架构提供两种段描述符表, 分别是: 全局段描述符表(Global Descriptor Table) 和 本地段描述符(Local Descriptor Table). 系统中至少有一个GDT可以被有所进程访问, 同时系统中可以有一个或多个LDT被某个进程私有或者在若干进程之间共享. GDT是内存中的一个数据结构, 类似数组, 而LDT是一个段, 它的段描述符保存在GDT中.</p><h4 id=2-分页机制><a class=markdownIt-Anchor href=#2-分页机制></a> 2. 分页机制</h4><blockquote><p>分页机制让现代操作系统中的虚拟内存称为可能, 一个页面可以存在于物理内存中, 也可以存放在磁盘的交换区域中, 程序可以利用比机器物理内存更大的内存区域.</p></blockquote><p>​	分页机制的核心思想是通过页表将线性地址转换位物理地址, 并配合旁路转换缓冲区(Translation Lookaside Buffer, TLB)来加速地址转换过程. 这里对分页和分段不做详细描述, 会单独深入了解这两个关键机制.</p><p><img src=https://imagebed.torch-fan.site/2022/blog/6541efd3-cf26-41bf-96df-d922ee524d30_.png alt=分页机制></p><h2 id=22-x86架构的基本运行环境><a class=markdownIt-Anchor href=#22-x86架构的基本运行环境></a> 2.2 x86架构的基本运行环境</h2><h3 id=221-三种基本模式><a class=markdownIt-Anchor href=#221-三种基本模式></a> 2.2.1 三种基本模式:</h3><blockquote><p>x86实际上有4种运行模式: 实模式、保护模式、SMM模式和虚拟8086模式。除了SMM模式外，其余三种模式均常见于书本中。</p></blockquote><ol><li>实模式（Real Mode）：当CPU加电并经历最初的混沌状态后，首先进入的就是实模式，他是早期intel 8086处理器工作的模式。在该模式下，逻辑地址转换后即为物理地址，CPU可以访问1MB的物理地址空间（实际是1MB+64KB）。操作系统或BIOS通常在该模式下准备必要的数据结构和初始化关键的寄存器，然后切入保护模式。</li><li>保护模式（Protect Mode）：操作系统运行时最常用的模式，在该模式下，CPU的所有功能几乎都能得到使用，可以访问架构允许的所有物理地址空间（例如x86是4GB）。</li><li>虚拟8086模式（Virutal 8086 mode）：为了早期的程序能够在保护模式下运行，x86提供了8086模式。该模式可以让CPU在保护模式下为8086程序虚拟实模式的运行环境，使这些程序在执行时无须真正的从保护模式切换到实模式。</li></ol><h2 id=23-其他><a class=markdownIt-Anchor href=#23-其他></a> 2.3 其他：</h2><p>​	诸如I/O、中断、寄存器、总线相关内容过于繁复，由于此时重心在虚拟化方面，关于操作系统相关知识我们可以在需要时进行补充。</p><section class=footnotes><div class=footnote-list><ol><li><span id=fn:1 class=footnote-text><span><a target=_blank rel=noopener href=https://www.geeksforgeeks.org/memory-mapped-i-o-and-isolated-i-o/ >Memory mapped I/O and Isolated I/O - GeeksforGeeks</a> <a href=#fnref:1 rev=footnote class=footnote-backref>↩</a></span></span></li><li><span id=fn:2 class=footnote-text><span><a target=_blank rel=noopener href=https://www.geeksforgeeks.org/chroot-command-in-linux-with-examples/ >chroot command in Linux with examples - GeeksforGeeks</a> <a href=#fnref:2 rev=footnote class=footnote-backref>↩</a></span></span></li><li><span id=fn:3 class=footnote-text><span><a target=_blank rel=noopener href=https://www.geeksforgeeks.org/difference-between-paging-and-segmentation/ >Difference Between Paging and Segmentation - GeeksforGeeks</a> <a href=#fnref:3 rev=footnote class=footnote-backref>↩</a></span></span></li></ol></div></section></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class=category-chains><span class=category-chain><a href=/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/ class=category-chain-item>计算机基础</a> <span>></span> <a href=/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/ class=category-chain-item>操作系统</a> <span>></span> <a href=/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E5%8C%96%E5%9F%BA%E7%A1%80/ class=category-chain-item>虚拟化基础</a></span></span></div></div><div class="license-box my-3"><div class=license-title><div>虚拟化(1):前言</div><div>https://www.torch-fan.site/2022/07/14/虚拟化-1-前言/</div></div><div class=license-meta><div class=license-meta-item><div>作者</div><div>Torch-Fan</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2022年7月14日</div></div><div class="license-meta-item license-meta-date"><div>更新于</div><div>2022年11月15日</div></div><div class=license-meta-item><div>许可协议</div><div><a target=_blank href=https://creativecommons.org/licenses/by/4.0/ ><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href=/2022/07/16/%E8%99%9A%E6%8B%9F%E5%8C%96-2-%E8%99%9A%E6%8B%9F%E5%8C%96%E6%A6%82%E8%BF%B0/ title=虚拟化(2):虚拟化概述><i class="iconfont icon-arrowleft"></i> <span class=hidden-mobile>虚拟化(2):虚拟化概述</span> <span class=visible-mobile>上一篇</span></a></article><article class="post-next col-6"><a href=/2022/07/11/clash%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E9%A2%84%E5%A4%84%E7%90%86/ title=clash配置文件预处理><span class=hidden-mobile>clash配置文件预处理</span> <span class=visible-mobile>下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id=comments><script type=text/javascript nonce=3>Fluid.utils.loadComments("#comments",function(){var t="github-light",e="github-dark",i="dark"===document.documentElement.getAttribute("data-user-color-scheme")?e:t,t=(window.UtterancesThemeLight=t,window.UtterancesThemeDark=e,document.createElement("script"));t.setAttribute("src","https://utteranc.es/client.js"),t.setAttribute("repo","QiliangFan/qiliangfan.github.io"),t.setAttribute("issue-term","title"),t.setAttribute("label","BlogComment"),t.setAttribute("theme",i),t.setAttribute("crossorigin","anonymous"),document.getElementById("comments").appendChild(t)})</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class=sidebar style=margin-left:-1rem><div id=toc><p class=toc-header><i class="iconfont icon-list"></i>&nbsp;目录</p><div class=toc-body id=toc-body></div></div></aside></div></div></div><a id=scroll-top-button aria-label=TOP href=# role=button><i class="iconfont icon-arrowup" aria-hidden=true></i></a><div class="modal fade" id=modalSearch tabindex=-1 role=dialog aria-labelledby=ModalLabel aria-hidden=true><div class="modal-dialog modal-dialog-scrollable modal-lg" role=document><div class=modal-content><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type=button id=local-search-close class=close data-dismiss=modal aria-label=Close><span aria-hidden=true>&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type=text id=local-search-input class="form-control validate"> <label data-error=x data-success=v for=local-search-input>关键词</label></div><div class=list-group id=local-search-result></div></div></div></div></div></main><footer><div class=footer-inner><div class=footer-content><a href=https://hexo.io target=_blank rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href=https://github.com/fluid-dev/hexo-theme-fluid target=_blank rel="nofollow noopener"><span>Fluid</span></a></div></div></footer><script src=https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js></script><link rel=stylesheet href=https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css><script nonce=5>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",function(){NProgress.done()})</script><script src=https://lib.baomitu.com/jquery/3.6.0/jquery.min.js></script><script src=https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js></script><script src=/js/events.js></script><script src=/js/plugins.js></script><script src=https://lib.baomitu.com/typed.js/2.0.12/typed.min.js></script><script nonce=6>!function(t){var e=Fluid.plugins.typing,t=t.getElementById("subtitle");t&&e&&e(t.getAttribute("data-typed-text"))}((window,document))</script><script src=/js/img-lazyload.js></script><script nonce=12>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js",function(){var t,o=jQuery("#toc");0!==o.length&&window.tocbot&&(t=jQuery("#board-ctn").offset().top,window.tocbot.init({tocSelector:"#toc-body",contentSelector:".markdown-body",headingSelector:CONFIG.toc.headingSelector||"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:CONFIG.toc.collapseDepth||0,scrollSmooth:!0,headingsOffset:-t}),0<o.find(".toc-list-item").length)&&o.css("visibility","visible")})</script><script nonce=8>!function(){var n,i=CONFIG.code_language.enable&&CONFIG.code_language.default,t=CONFIG.copy_btn;(i||t)&&(n="",n=(n+='<div class="code-widget">')+"LANG"+"</div>",jQuery(".markdown-body pre").each(function(){var e,a=jQuery(this);0<a.find("code.mermaid").length||0<a.find("span.line").length||(e="",i&&(e=CONFIG.code_language.default,0<a[0].children.length&&2<=a[0].children[0].classList.length&&a.children().hasClass("hljs")?e=a[0].children[0].classList[1]:a[0].getAttribute("data-language")?e=a[0].getAttribute("data-language"):a.parent().hasClass("sourceCode")&&0<a[0].children.length&&2<=a[0].children[0].classList.length?(e=a[0].children[0].classList[1],a.parent().addClass("code-wrapper")):a.parent().hasClass("markdown-body")&&0===a[0].classList.length&&a.wrap('<div class="code-wrapper"></div>'),e=e.toUpperCase().replace("NONE",CONFIG.code_language.default)),a.append(n.replace("LANG",e).replace('code-widget">',(e=a[0],(0<=Fluid.utils.getBackgroundLightness(e)?"code-widget-light":"code-widget-dark")+(t?' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>':' code-widget">')))),t&&Fluid.utils.createScript("https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js",function(){new window.ClipboardJS(".copy-btn",{target:function(e){for(var a=e.parentNode.childNodes,n=0;n<a.length;n++)if("CODE"===a[n].tagName)return a[n]}}).on("success",function(e){e.clearSelection(),e.trigger.innerHTML=e.trigger.innerHTML.replace("icon-copy","icon-success"),setTimeout(function(){e.trigger.innerHTML=e.trigger.innerHTML.replace("icon-success","icon-copy")},2e3)})}))}))}()</script><script nonce=10>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var o,n=[];for(o of(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","))n.push(".markdown-body > "+o.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(n.join(", "))})</script><script nonce=11>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",function(){Fluid.plugins.fancyBox()})</script><script nonce=14>Fluid.plugins.imageCaption()</script><script src=/js/local-search.js></script><script src=/js/boot.js></script><noscript><div class=noscript-warning>博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>